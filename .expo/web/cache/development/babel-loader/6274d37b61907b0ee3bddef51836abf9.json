{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport firebase from \"firebase/app\";\nvar firebaseConfig = {\n  apiKey: \"AIzaSyCuYnpqG2J9V9F5XG-JfK81ZcAXelIWPyo\",\n  authDomain: \"leruo-app.firebaseapp.com\",\n  projectId: \"leruo-app\",\n  storageBucket: \"leruo-app.appspot.com\",\n  messagingSenderId: \"188762033744\",\n  appId: \"1:188762033744:web:b4ca2d5f8983dee2430b55\",\n  measurementId: \"G-EQE7BZBH3L\"\n};\nvar app = firebase.initializeApp(firebaseConfig);\nvar auth = app.auth();\nvar db = app.firestore();\nvar googleProvider = new firebase.auth.GoogleAuthProvider();\n\nvar signInWithGoogle = function signInWithGoogle() {\n  var res, user, query;\n  return _regeneratorRuntime.async(function signInWithGoogle$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(auth.signInWithPopup(googleProvider));\n\n        case 3:\n          res = _context.sent;\n          user = res.user;\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(db.collection(\"users\").where(\"uid\", \"==\", user.uid).get());\n\n        case 7:\n          query = _context.sent;\n\n          if (!(query.docs.length === 0)) {\n            _context.next = 11;\n            break;\n          }\n\n          _context.next = 11;\n          return _regeneratorRuntime.awrap(db.collection(\"users\").add({\n            uid: user.uid,\n            name: user.displayName,\n            authProvider: \"google\",\n            email: user.email\n          }));\n\n        case 11:\n          _context.next = 17;\n          break;\n\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(_context.t0);\n          alert(_context.t0.message);\n\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 13]], Promise);\n};\n\nvar signInWithEmailAndPassword = function signInWithEmailAndPassword(email, password) {\n  return _regeneratorRuntime.async(function signInWithEmailAndPassword$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(auth.signInWithEmailAndPassword(email, password));\n\n        case 3:\n          _context2.next = 9;\n          break;\n\n        case 5:\n          _context2.prev = 5;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error(_context2.t0);\n          alert(_context2.t0.message);\n\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[0, 5]], Promise);\n};\n\nvar registerWithEmailAndPassword = function registerWithEmailAndPassword(name, email, password) {\n  var res, user;\n  return _regeneratorRuntime.async(function registerWithEmailAndPassword$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return _regeneratorRuntime.awrap(auth.createUserWithEmailAndPassword(email, password));\n\n        case 3:\n          res = _context3.sent;\n          user = res.user;\n          _context3.next = 7;\n          return _regeneratorRuntime.awrap(db.collection(\"users\").add({\n            uid: user.uid,\n            name: name,\n            authProvider: \"local\",\n            email: email\n          }));\n\n        case 7:\n          _context3.next = 13;\n          break;\n\n        case 9:\n          _context3.prev = 9;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error(_context3.t0);\n          alert(_context3.t0.message);\n\n        case 13:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, [[0, 9]], Promise);\n};\n\nvar sendPasswordResetEmail = function sendPasswordResetEmail(email) {\n  return _regeneratorRuntime.async(function sendPasswordResetEmail$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return _regeneratorRuntime.awrap(auth.sendPasswordResetEmail(email));\n\n        case 3:\n          alert(\"Password reset link sent!\");\n          _context4.next = 10;\n          break;\n\n        case 6:\n          _context4.prev = 6;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.error(_context4.t0);\n          alert(_context4.t0.message);\n\n        case 10:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, [[0, 6]], Promise);\n};\n\nvar logout = function logout() {\n  auth.signOut();\n};\n\nexport { auth, db, signInWithGoogle, signInWithEmailAndPassword, registerWithEmailAndPassword, sendPasswordResetEmail, logout };","map":{"version":3,"sources":["/home/jones/Videos/react native projects/Leruo/src/core/Firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","initializeApp","auth","db","firestore","googleProvider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","res","user","collection","where","uid","get","query","docs","length","add","name","displayName","authProvider","email","console","error","alert","message","signInWithEmailAndPassword","password","registerWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordResetEmail","logout","signOut"],"mappings":"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","sourcesContent":["import firebase from \"firebase/app\";\n\n\nconst firebaseConfig = {\n apiKey: \"AIzaSyCuYnpqG2J9V9F5XG-JfK81ZcAXelIWPyo\",\n  authDomain: \"leruo-app.firebaseapp.com\",\n  projectId: \"leruo-app\",\n  storageBucket: \"leruo-app.appspot.com\",\n  messagingSenderId: \"188762033744\",\n  appId: \"1:188762033744:web:b4ca2d5f8983dee2430b55\",\n  measurementId: \"G-EQE7BZBH3L\"\n}\n\nconst app = firebase.initializeApp(firebaseConfig);\nconst auth = app.auth();\nconst db = app.firestore();\nconst googleProvider = new firebase.auth.GoogleAuthProvider();\nconst signInWithGoogle = async () => {\n  try {\n    const res = await auth.signInWithPopup(googleProvider);\n    const user = res.user;\n    const query = await db\n      .collection(\"users\")\n      .where(\"uid\", \"==\", user.uid)\n      .get();\n    if (query.docs.length === 0) {\n      await db.collection(\"users\").add({\n        uid: user.uid,\n        name: user.displayName,\n        authProvider: \"google\",\n        email: user.email,\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\nconst signInWithEmailAndPassword = async (email, password) => {\n  try {\n    await auth.signInWithEmailAndPassword(email, password);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\nconst registerWithEmailAndPassword = async (name, email, password) => {\n  try {\n    const res = await auth.createUserWithEmailAndPassword(email, password);\n    const user = res.user;\n    await db.collection(\"users\").add({\n      uid: user.uid,\n      name,\n      authProvider: \"local\",\n      email,\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\nconst sendPasswordResetEmail = async (email) => {\n  try {\n    await auth.sendPasswordResetEmail(email);\n    alert(\"Password reset link sent!\");\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\nconst logout = () => {\n  auth.signOut();\n};\nexport {\n  auth,\n  db,\n  signInWithGoogle,\n  signInWithEmailAndPassword,\n  registerWithEmailAndPassword,\n  sendPasswordResetEmail,\n  logout,\n};\n"]},"metadata":{},"sourceType":"module"}